import{a as A}from"./chunk-HF7AJZBN.js";import{a as N}from"./chunk-4I6XGE32.js";import{a as H}from"./chunk-IHOFWBF3.js";import{Ab as k,Dc as $,Ea as _,Fa as f,Fc as j,Gc as R,Ka as w,Kb as M,Ob as l,Sb as S,Tb as v,Ub as P,Wb as g,Xb as C,Yb as r,Zb as a,_b as d,_c as V,cc as u,fc as h,hc as s,ib as O,ld as D,ob as o,qa as p,sc as T,tc as F,ua as y,uc as x,vc as m,wc as E,xc as I,zb as b}from"./chunk-UVO63754.js";var q=["container"],z=(t,n)=>n.id,B=t=>({"p-6":t}),L=(t,n)=>({"mdi-chevron-down":t,"mdi-chevron-up":n});function G(t,n){if(t&1){let e=u();r(0,"div",7),h("animating",function(c){_(e);let W=s(2);return f(W.animationStatus.set(c))}),a()}if(t&2){let e=s().$implicit;l("text",e.content)}}function J(t,n){if(t&1&&d(0,"div",6),t&2){let e=s().$implicit;l("innerHtml",e.content,O)}}function K(t,n){if(t&1&&(r(0,"div",12)(1,"div",13)(2,"small",14),m(3),d(4,"i",15),a()(),r(5,"a",16),m(6),a()()),t&2){let e=n.$implicit,i=n.$index;o(3),I(" doc ",i+1," "),o(3),E(e.filepath)}}function U(t,n){if(t&1){let e=u();r(0,"div")(1,"div",8),h("click",function(){_(e);let c=x(6);return f(c.hidden=!c.hidden)}),d(2,"i",9),r(3,"span",10),m(4,"References"),a()(),r(5,"div",11,1),g(7,K,7,2,"div",12,P),a()()}if(t&2){let e=x(6),i=s().$implicit;o(2),l("ngClass",R(1,L,e.hidden,!e.hidden)),o(5),C(i.context.citations)}}function X(t,n){if(t&1&&(r(0,"div"),M(1,G,1,1,"div",5)(2,J,1,1,"div",6)(3,U,9,4,"div"),a()),t&2){let e=n.$implicit;S("message ",e.role,""),o(),v(e.role==="assistant"?1:2),o(2),v(e.context&&e.context.citations.length?3:-1)}}var Q=class t{container=k.required("container");injector=p(w);service=p(A);animationStatus=b(!1);ngOnInit(){V(()=>{new H(this.container().nativeElement,{})},{injector:this.injector})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=y({type:t,selectors:[["app-overlay-chat"]],viewQuery:function(e,i){e&1&&T(i.container,q,5),e&2&&F()},standalone:!0,features:[$],decls:5,vars:3,consts:[["container",""],["linkRef",""],["id","chat-container",1,"flex","flex-col","bg-black/40","w-full","overflow-hidden"],[1,"min-h-0","flex-auto","flex","flex-col","w-full","h-full","relative","overflow-hidden","space-y-4","[&>.message.user]:justify-start","[&>.message]:text-white",3,"ngClass"],[3,"class"],["appTextWriterAnimator","",1,"whitespace-pre-wrap","break-words",3,"text"],[1,"whitespace-pre-wrap","break-words",3,"innerHtml"],["appTextWriterAnimator","",1,"whitespace-pre-wrap","break-words",3,"animating","text"],[1,"icon-with-title",3,"click"],[1,"mdi",3,"ngClass"],[1,"title"],["hidden",""],["dir","auto"],[1,"d-inline"],[1,"px-1","text-primary"],[1,"mdi","mdi-link-variant"],[1,"d-inline","citation-link",2,"cursor","pointer"]],template:function(e,i){e&1&&(r(0,"div",2)(1,"div",3,0),g(3,X,4,5,"div",4,z),a()()),e&2&&(o(),l("ngClass",j(1,B,i.service.messages().length)),o(2),C(i.service.messages()))},dependencies:[D,N],styles:['.message[_ngcontent-%COMP%]{position:relative;display:flex;flex-direction:column;font-size:1.5rem;line-height:2rem}.message.user[_ngcontent-%COMP%]{align-items:flex-start}.message.user[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border-radius:.375rem;border-top-right-radius:0;background-color:#00000080;padding:.5rem}.message.user[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:after{content:"";position:absolute;right:-12px;top:0;width:12px;height:12px;clip-path:polygon(0 0,100% 0,0 100%);background-color:inherit}.message.assistant[_ngcontent-%COMP%]{align-items:flex-end}.message.assistant[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{border-radius:.375rem;border-top-left-radius:0;background-color:#0003;padding:.5rem}.message.assistant[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:after{content:"";position:absolute;left:-12px;top:0;background-color:inherit;width:12px;height:12px;clip-path:polygon(0 0,100% 0,100% 100%)}']})};export{Q as a};
