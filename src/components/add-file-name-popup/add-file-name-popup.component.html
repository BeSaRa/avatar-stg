<div class="flex flex-col w-[min(500px,80vw)]">
  <div class="p-4 bg-primary text-white">{{ lang.locals.save_file_as }}</div>
  <div class="p-4 min-h-0 flex flex-auto flex-col">
    <input
      class="w-full p-2 border border-gray-300 rounded-lg focus:outline-none focus:ring focus:ring-gray-300 text-gray-800"
      type="text"
      [ngClass]="{
        'bg-red-50 !border-red-400': fileNameControl.invalid && fileNameControl.touched && fileNameControl.dirty,
      }"
      [placeholder]="lang.locals.enter_filename"
      [formControl]="fileNameControl" />

    <!-- Static Tip -->
    <small class="block mt-1 text-sm text-gray-400">
      {{ lang.locals.filenameTip }}
      <ul class="list-disc list-inside">
        <li>{{ lang.locals.filenameLetters }}</li>
        <li>{{ lang.locals.filenameNumbers }}</li>
        <li>{{ lang.locals.filenameSpecialChars }}</li>
      </ul>
    </small>

    <!-- Dynamic Validation Feedback -->
    @if (fileNameControl.errors?.['required'] && fileNameControl.touched) {
      <small class="block mt-1 text-sm text-red-500">
        {{ lang.locals.filenameRequired }}
      </small>
    } @else if (fileNameControl.errors?.['pattern'] && fileNameControl.touched) {
      <small class="block mt-1 text-sm text-red-500">
        {{ lang.locals.filenamePattern }}
      </small>
    }
  </div>
</div>
<div class="flex justify-between mt-6 space-x-2 gap-4 p-4">
  <button
    type="button"
    (click)="cancel()"
    class="bg-gray-300 w-1/2 text-gray-800 font-medium py-2 px-4 rounded-lg hover:bg-gray-400 focus:ring-2 focus:ring-gray-200 focus:outline-none">
    {{ lang.locals.cancel }}
  </button>
  <button
    type="button"
    (click)="save()"
    class="bg-primary/90 w-1/2 text-white font-medium py-2 px-4 rounded-lg hover:bg-primary focus:ring-4 focus:ring-gray-300 focus:outline-none disabled:opacity-50">
    {{ lang.locals.save_file_as }}
  </button>
</div>
